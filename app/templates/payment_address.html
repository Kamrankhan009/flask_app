{% extends 'nav.html' %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/cart_payment_form.css')}}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css')}}">



<div class="lcontainer">
    
    <div class="" style="background-color: white; padding: 30px;">
        <h2>Shipping Address</h2>
        <form id="payment-form" action="/payment_address" method="post">


            <div class="row">
                <div class="col-md-12">
                  <label>Country</label>
                  <select id="countryDropdown" class="form-control" name="country">
                    <option value="" >{% if user_address['country'] %} {{user_address['country']}} {%else%} select country {%endif%}</option>
                </select>
                 <br>
                <script>
                    const countryDropdown = document.getElementById('countryDropdown');
            
                    // Fetch countries from REST Countries API
                    fetch('https://restcountries.com/v3.1/all')
                        .then(response => response.json())
                        .then(data => {
                            data.forEach(country => {
                                const option = document.createElement('option');
                                option.value = country.name.common;
                                option.text = country.name.common;
                                countryDropdown.appendChild(option);
                            });
                        })
                        .catch(error => console.error('Error fetching data:', error));
                </script>
                </div>
                </div>


                <div class="row">
                    <div class="col-md-6">
                      <label>First Name</label>
                      <input type="text" name="f_name" id="f_name" value="{{user_address['f_name']}}" class="form-control p-4" required>
                    </div>

                    <div class="col-md-6">
                        <label>Last Name</label>
                        <input type="text" name="l_name" id="l_name" value="{{user_address['l_name']}}" class="form-control p-4" required>
                      </div>
                    </div>

   <br>

        <div class="row">
        <div class="col-md-12">
          <label>Company (optional)</label>
          <input type="text" name="company" id="company" value="{{user_address['company']}}" class="form-control p-4" required>
        </div>
        </div>

<br>
        <div class="row">
            <div class="col-md-12">
              <label>Address</label>
              <input type="text" name="address" id="address" value="{{user_address['address']}}" class="form-control p-4" required>
            </div>
            </div>

            <br>


        <div class="row" >

          <style>
            #countryDropdown {
    width: 100%;
    padding: 8px 12px; /* Add some padding to improve visual appearance */
  }
  
  #countryDropdown option {
    padding: 8px 12px; /* Add padding to vertically center text */
    vertical-align: middle; /* Vertically center text */
  }
          </style>
          <div class="col-md-6">
            <label>City</label>
            
            <!-- <select id="countryDropdown" class="form-control" style=""></select>
             -->
             <input type="text" name="city" id="city" value="{{user_address['city']}}" class="form-control p-4" required>
          </div>
           
        <div class="col-md-6" style="">
          <label>Postal Code</label>
          <!-- <select id="" class="form-control"></select> -->
          <input type="text" name="postal_code" id="postal_code" value="{{user_address['postal_code']}}" class="form-control p-4" required>
        </div>


        <!-- 6S4BGGrFAW5JbqUoWFje9RRZd0WaMGJOMRf3bTilQae9NSMgmBKoVe713_loX1i7-ig -->


        

        </div>


        
        <div class="row">
            <div class="col-md-12">
              <label>Phone</label>
              <input type="text" name="phone" id="phone" value="{{user_address['phone_number']}}" class="form-control p-4" required>
            </div>
            </div>
<br>
       <input type="hidden" name="amount" value="{%if amount%}{{amount}}{%else%}{{user_address['amount']}}{%endif%}">
      <div class="row">
        <div class="col-md-12 d-flex justify-content-center">
          <button type="submit" class="btn btn-primary">Proceed with Payment</button>
        </div>
          </div>
        </form>
      </div>
    
      

</div>

<script src="{{ url_for('static', filename='js/cart.js') }}"></script>
<script src="{{ url_for('static', filename='js/purplegraph.js') }}"></script>
{% endblock%}
